var mockery = require('mockery');
var expect = require('chai').expect;

describe('Module Interface', function () {

    beforeEach(function () {

        this.Cache = function (size) {
            this.size = size;
        };

        mockery.enable({
            warnOnReplace: false,
            useCleanCache: true
        });

        mockery.registerAllowable('../../lib/Guild', true);
        mockery.registerMock('./Cache', this.Cache);

        this.ModuleInterface = require('../../lib/Guild');

    });

    describe('cacheWithSize(size) where size equals 200', function () {

        beforeEach(function () {

            this.result = this.ModuleInterface.cacheWithSize(200);

        });

        it('Should create a new Cache instance using the given size, and return it', function () {

            expect(this.result.size).to.equal(200);

        });

    });

});